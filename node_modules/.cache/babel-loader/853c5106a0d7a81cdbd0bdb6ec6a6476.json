{"ast":null,"code":"import { __extends, __values } from \"tslib\";\nimport { Observable } from './Observable';\nimport { Subscription, EMPTY_SUBSCRIPTION } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { arrRemove } from './util/arrRemove';\nimport { errorContext } from './util/errorContext';\nvar Subject = function (_super) {\n  __extends(Subject, _super);\n  function Subject() {\n    var _this = _super.call(this) || this;\n    _this.closed = false;\n    _this.currentObservers = null;\n    _this.observers = [];\n    _this.isStopped = false;\n    _this.hasError = false;\n    _this.thrownError = null;\n    return _this;\n  }\n  Subject.prototype.lift = function (operator) {\n    var subject = new AnonymousSubject(this, this);\n    subject.operator = operator;\n    return subject;\n  };\n  Subject.prototype._throwIfClosed = function () {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    }\n  };\n  Subject.prototype.next = function (value) {\n    var _this = this;\n    errorContext(function () {\n      var e_1, _a;\n      _this._throwIfClosed();\n      if (!_this.isStopped) {\n        if (!_this.currentObservers) {\n          _this.currentObservers = Array.from(_this.observers);\n        }\n        try {\n          for (var _b = __values(_this.currentObservers), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var observer = _c.value;\n            observer.next(value);\n          }\n        } catch (e_1_1) {\n          e_1 = {\n            error: e_1_1\n          };\n        } finally {\n          try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n          } finally {\n            if (e_1) throw e_1.error;\n          }\n        }\n      }\n    });\n  };\n  Subject.prototype.error = function (err) {\n    var _this = this;\n    errorContext(function () {\n      _this._throwIfClosed();\n      if (!_this.isStopped) {\n        _this.hasError = _this.isStopped = true;\n        _this.thrownError = err;\n        var observers = _this.observers;\n        while (observers.length) {\n          observers.shift().error(err);\n        }\n      }\n    });\n  };\n  Subject.prototype.complete = function () {\n    var _this = this;\n    errorContext(function () {\n      _this._throwIfClosed();\n      if (!_this.isStopped) {\n        _this.isStopped = true;\n        var observers = _this.observers;\n        while (observers.length) {\n          observers.shift().complete();\n        }\n      }\n    });\n  };\n  Subject.prototype.unsubscribe = function () {\n    this.isStopped = this.closed = true;\n    this.observers = this.currentObservers = null;\n  };\n  Object.defineProperty(Subject.prototype, \"observed\", {\n    get: function get() {\n      var _a;\n      return ((_a = this.observers) === null || _a === void 0 ? void 0 : _a.length) > 0;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Subject.prototype._trySubscribe = function (subscriber) {\n    this._throwIfClosed();\n    return _super.prototype._trySubscribe.call(this, subscriber);\n  };\n  Subject.prototype._subscribe = function (subscriber) {\n    this._throwIfClosed();\n    this._checkFinalizedStatuses(subscriber);\n    return this._innerSubscribe(subscriber);\n  };\n  Subject.prototype._innerSubscribe = function (subscriber) {\n    var _this = this;\n    var _a = this,\n      hasError = _a.hasError,\n      isStopped = _a.isStopped,\n      observers = _a.observers;\n    if (hasError || isStopped) {\n      return EMPTY_SUBSCRIPTION;\n    }\n    this.currentObservers = null;\n    observers.push(subscriber);\n    return new Subscription(function () {\n      _this.currentObservers = null;\n      arrRemove(observers, subscriber);\n    });\n  };\n  Subject.prototype._checkFinalizedStatuses = function (subscriber) {\n    var _a = this,\n      hasError = _a.hasError,\n      thrownError = _a.thrownError,\n      isStopped = _a.isStopped;\n    if (hasError) {\n      subscriber.error(thrownError);\n    } else if (isStopped) {\n      subscriber.complete();\n    }\n  };\n  Subject.prototype.asObservable = function () {\n    var observable = new Observable();\n    observable.source = this;\n    return observable;\n  };\n  Subject.create = function (destination, source) {\n    return new AnonymousSubject(destination, source);\n  };\n  return Subject;\n}(Observable);\nexport { Subject };\nvar AnonymousSubject = function (_super) {\n  __extends(AnonymousSubject, _super);\n  function AnonymousSubject(destination, source) {\n    var _this = _super.call(this) || this;\n    _this.destination = destination;\n    _this.source = source;\n    return _this;\n  }\n  AnonymousSubject.prototype.next = function (value) {\n    var _a, _b;\n    (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.next) === null || _b === void 0 ? void 0 : _b.call(_a, value);\n  };\n  AnonymousSubject.prototype.error = function (err) {\n    var _a, _b;\n    (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.error) === null || _b === void 0 ? void 0 : _b.call(_a, err);\n  };\n  AnonymousSubject.prototype.complete = function () {\n    var _a, _b;\n    (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.complete) === null || _b === void 0 ? void 0 : _b.call(_a);\n  };\n  AnonymousSubject.prototype._subscribe = function (subscriber) {\n    var _a, _b;\n    return (_b = (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber)) !== null && _b !== void 0 ? _b : EMPTY_SUBSCRIPTION;\n  };\n  return AnonymousSubject;\n}(Subject);\nexport { AnonymousSubject };","map":{"version":3,"sources":["../../../src/internal/Subject.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { __extends, __values } from \"tslib\";\nimport { Observable } from './Observable';\nimport { Subscription, EMPTY_SUBSCRIPTION } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { arrRemove } from './util/arrRemove';\nimport { errorContext } from './util/errorContext';\nvar Subject = (function (_super) {\n    __extends(Subject, _super);\n    function Subject() {\n        var _this = _super.call(this) || this;\n        _this.closed = false;\n        _this.currentObservers = null;\n        _this.observers = [];\n        _this.isStopped = false;\n        _this.hasError = false;\n        _this.thrownError = null;\n        return _this;\n    }\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype._throwIfClosed = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n    };\n    Subject.prototype.next = function (value) {\n        var _this = this;\n        errorContext(function () {\n            var e_1, _a;\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                if (!_this.currentObservers) {\n                    _this.currentObservers = Array.from(_this.observers);\n                }\n                try {\n                    for (var _b = __values(_this.currentObservers), _c = _b.next(); !_c.done; _c = _b.next()) {\n                        var observer = _c.value;\n                        observer.next(value);\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n            }\n        });\n    };\n    Subject.prototype.error = function (err) {\n        var _this = this;\n        errorContext(function () {\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                _this.hasError = _this.isStopped = true;\n                _this.thrownError = err;\n                var observers = _this.observers;\n                while (observers.length) {\n                    observers.shift().error(err);\n                }\n            }\n        });\n    };\n    Subject.prototype.complete = function () {\n        var _this = this;\n        errorContext(function () {\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                _this.isStopped = true;\n                var observers = _this.observers;\n                while (observers.length) {\n                    observers.shift().complete();\n                }\n            }\n        });\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = this.closed = true;\n        this.observers = this.currentObservers = null;\n    };\n    Object.defineProperty(Subject.prototype, \"observed\", {\n        get: function () {\n            var _a;\n            return ((_a = this.observers) === null || _a === void 0 ? void 0 : _a.length) > 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Subject.prototype._trySubscribe = function (subscriber) {\n        this._throwIfClosed();\n        return _super.prototype._trySubscribe.call(this, subscriber);\n    };\n    Subject.prototype._subscribe = function (subscriber) {\n        this._throwIfClosed();\n        this._checkFinalizedStatuses(subscriber);\n        return this._innerSubscribe(subscriber);\n    };\n    Subject.prototype._innerSubscribe = function (subscriber) {\n        var _this = this;\n        var _a = this, hasError = _a.hasError, isStopped = _a.isStopped, observers = _a.observers;\n        if (hasError || isStopped) {\n            return EMPTY_SUBSCRIPTION;\n        }\n        this.currentObservers = null;\n        observers.push(subscriber);\n        return new Subscription(function () {\n            _this.currentObservers = null;\n            arrRemove(observers, subscriber);\n        });\n    };\n    Subject.prototype._checkFinalizedStatuses = function (subscriber) {\n        var _a = this, hasError = _a.hasError, thrownError = _a.thrownError, isStopped = _a.isStopped;\n        if (hasError) {\n            subscriber.error(thrownError);\n        }\n        else if (isStopped) {\n            subscriber.complete();\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable();\n        observable.source = this;\n        return observable;\n    };\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable));\nexport { Subject };\nvar AnonymousSubject = (function (_super) {\n    __extends(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        var _this = _super.call(this) || this;\n        _this.destination = destination;\n        _this.source = source;\n        return _this;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.next) === null || _b === void 0 ? void 0 : _b.call(_a, value);\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.error) === null || _b === void 0 ? void 0 : _b.call(_a, err);\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.complete) === null || _b === void 0 ? void 0 : _b.call(_a);\n    };\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var _a, _b;\n        return (_b = (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber)) !== null && _b !== void 0 ? _b : EMPTY_SUBSCRIPTION;\n    };\n    return AnonymousSubject;\n}(Subject));\nexport { AnonymousSubject };\n//# sourceMappingURL=Subject.js.map"]},"metadata":{},"sourceType":"module"}