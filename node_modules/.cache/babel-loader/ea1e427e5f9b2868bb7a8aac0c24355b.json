{"ast":null,"code":"import { SafeSubscriber, Subscriber } from './Subscriber';\nimport { isSubscription } from './Subscription';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nimport { isFunction } from './util/isFunction';\nimport { errorContext } from './util/errorContext';\nvar Observable = function () {\n  function Observable(subscribe) {\n    if (subscribe) {\n      this._subscribe = subscribe;\n    }\n  }\n  Observable.prototype.lift = function (operator) {\n    var observable = new Observable();\n    observable.source = this;\n    observable.operator = operator;\n    return observable;\n  };\n  Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n    var _this = this;\n    var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n    errorContext(function () {\n      var _a = _this,\n        operator = _a.operator,\n        source = _a.source;\n      subscriber.add(operator ? operator.call(subscriber, source) : source ? _this._subscribe(subscriber) : _this._trySubscribe(subscriber));\n    });\n    return subscriber;\n  };\n  Observable.prototype._trySubscribe = function (sink) {\n    try {\n      return this._subscribe(sink);\n    } catch (err) {\n      sink.error(err);\n    }\n  };\n  Observable.prototype.forEach = function (_next, promiseCtor) {\n    var _this = this;\n    promiseCtor = getPromiseCtor(promiseCtor);\n    return new promiseCtor(function (resolve, reject) {\n      var subscriber = new SafeSubscriber({\n        next: function next(value) {\n          try {\n            _next(value);\n          } catch (err) {\n            reject(err);\n            subscriber.unsubscribe();\n          }\n        },\n        error: reject,\n        complete: resolve\n      });\n      _this.subscribe(subscriber);\n    });\n  };\n  Observable.prototype._subscribe = function (subscriber) {\n    var _a;\n    return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);\n  };\n  Observable.prototype[Symbol_observable] = function () {\n    return this;\n  };\n  Observable.prototype.pipe = function () {\n    var operations = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      operations[_i] = arguments[_i];\n    }\n    return pipeFromArray(operations)(this);\n  };\n  Observable.prototype.toPromise = function (promiseCtor) {\n    var _this = this;\n    promiseCtor = getPromiseCtor(promiseCtor);\n    return new promiseCtor(function (resolve, reject) {\n      var value;\n      _this.subscribe(function (x) {\n        return value = x;\n      }, function (err) {\n        return reject(err);\n      }, function () {\n        return resolve(value);\n      });\n    });\n  };\n  Observable.create = function (subscribe) {\n    return new Observable(subscribe);\n  };\n  return Observable;\n}();\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n  var _a;\n  return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;\n}\nfunction isObserver(value) {\n  return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\nfunction isSubscriber(value) {\n  return value && value instanceof Subscriber || isObserver(value) && isSubscription(value);\n}","map":{"version":3,"sources":["../../../src/internal/Observable.ts"],"names":[],"mappings":"AACA,SAAS,cAAc,EAAE,UAAU,QAAQ,cAAc;AACzD,SAAS,cAAc,QAAsB,gBAAgB;AAE7D,SAAS,UAAU,IAAI,iBAAiB,QAAQ,qBAAqB;AACrE,SAAS,aAAa,QAAQ,aAAa;AAC3C,SAAS,MAAM,QAAQ,UAAU;AACjC,SAAS,UAAU,QAAQ,mBAAmB;AAC9C,SAAS,YAAY,QAAQ,qBAAqB;AAQlD,IAAA,UAAA,GAAA,YAAA;EAkBE,SAAA,UAAA,CAAY,SAA6E,EAAA;IACvF,IAAI,SAAS,EAAE;MACb,IAAI,CAAC,UAAU,GAAG,SAAS;IAC5B;EACH;EA4BA,UAAA,CAAA,SAAA,CAAA,IAAI,GAAJ,UAAQ,QAAyB,EAAA;IAC/B,IAAM,UAAU,GAAG,IAAI,UAAU,EAAK;IACtC,UAAU,CAAC,MAAM,GAAG,IAAI;IACxB,UAAU,CAAC,QAAQ,GAAG,QAAQ;IAC9B,OAAO,UAAU;EACnB,CAAC;EA6ID,UAAA,CAAA,SAAA,CAAA,SAAS,GAAT,UACE,cAAmE,EACnE,KAAqC,EACrC,QAA8B,EAAA;IAHhC,IAAA,KAAA,GAAA,IAAA;IAKE,IAAM,UAAU,GAAG,YAAY,CAAC,cAAc,CAAC,GAAG,cAAc,GAAG,IAAI,cAAc,CAAC,cAAc,EAAE,KAAK,EAAE,QAAQ,CAAC;IAEtH,YAAY,CAAC,YAAA;MACL,IAAA,EAAA,GAAuB,KAAI;QAAzB,QAAQ,GAAA,EAAA,CAAA,QAAA;QAAE,MAAM,GAAA,EAAA,CAAA,MAAS;MACjC,UAAU,CAAC,GAAG,CACZ,QAAQ,GAGJ,QAAQ,CAAC,IAAI,CAAC,UAAU,EAAE,MAAM,CAAC,GACjC,MAAM,GAIN,KAAI,CAAC,UAAU,CAAC,UAAU,CAAC,GAG3B,KAAI,CAAC,aAAa,CAAC,UAAU,CAAC,CACnC;IACH,CAAC,CAAC;IAEF,OAAO,UAAU;EACnB,CAAC;EAGS,UAAA,CAAA,SAAA,CAAA,aAAa,GAAvB,UAAwB,IAAmB,EAAA;IACzC,IAAI;MACF,OAAO,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC;KAC7B,CAAC,OAAO,GAAG,EAAE;MAIZ,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC;IAChB;EACH,CAAC;EA6DD,UAAA,CAAA,SAAA,CAAA,OAAO,GAAP,UAAQ,KAAwB,EAAE,WAAoC,EAAA;IAAtE,IAAA,KAAA,GAAA,IAAA;IACE,WAAW,GAAG,cAAc,CAAC,WAAW,CAAC;IAEzC,OAAO,IAAI,WAAW,CAAO,UAAC,OAAO,EAAE,MAAM,EAAA;MAC3C,IAAM,UAAU,GAAG,IAAI,cAAc,CAAI;QACvC,IAAI,EAAE,cAAC,KAAK,EAAA;UACV,IAAI;YACF,KAAI,CAAC,KAAK,CAAC;WACZ,CAAC,OAAO,GAAG,EAAE;YACZ,MAAM,CAAC,GAAG,CAAC;YACX,UAAU,CAAC,WAAW,EAAE;UACzB;QACH,CAAC;QACD,KAAK,EAAE,MAAM;QACb,QAAQ,EAAE;OACX,CAAC;MACF,KAAI,CAAC,SAAS,CAAC,UAAU,CAAC;IAC5B,CAAC,CAAkB;EACrB,CAAC;EAGS,UAAA,CAAA,SAAA,CAAA,UAAU,GAApB,UAAqB,UAA2B,EAAA;;IAC9C,OAAO,CAAA,EAAA,GAAA,IAAI,CAAC,MAAM,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAE,SAAS,CAAC,UAAU,CAAC;EAC3C,CAAC;EAOD,UAAA,CAAA,SAAA,CAAC,iBAAiB,CAAC,GAAnB,YAAA;IACE,OAAO,IAAI;EACb,CAAC;EA4FD,UAAA,CAAA,SAAA,CAAA,IAAI,GAAJ,YAAA;IAAK,IAAA,UAAA,GAAA,EAAA;SAAA,IAAA,EAAA,GAAA,CAA2C,EAA3C,EAAA,GAAA,SAAA,CAAA,MAA2C,EAA3C,EAAA,EAA2C,EAAA;MAA3C,UAAA,CAAA,EAAA,CAAA,GAAA,SAAA,CAAA,EAAA,CAAA;;IACH,OAAO,aAAa,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC;EACxC,CAAC;EA6BD,UAAA,CAAA,SAAA,CAAA,SAAS,GAAT,UAAU,WAAoC,EAAA;IAA9C,IAAA,KAAA,GAAA,IAAA;IACE,WAAW,GAAG,cAAc,CAAC,WAAW,CAAC;IAEzC,OAAO,IAAI,WAAW,CAAC,UAAC,OAAO,EAAE,MAAM,EAAA;MACrC,IAAI,KAAoB;MACxB,KAAI,CAAC,SAAS,CACZ,UAAC,CAAI,EAAA;QAAK,OAAC,KAAK,GAAG,CAAC;MAAV,CAAW,EACrB,UAAC,GAAQ,EAAA;QAAK,OAAA,MAAM,CAAC,GAAG,CAAC;MAAX,CAAW,EACzB,YAAA;QAAM,OAAA,OAAO,CAAC,KAAK,CAAC;MAAd,CAAc,CACrB;IACH,CAAC,CAA2B;EAC9B,CAAC;EA1aM,UAAA,CAAA,MAAM,GAA4B,UAAI,SAAwD,EAAA;IACnG,OAAO,IAAI,UAAU,CAAI,SAAS,CAAC;EACrC,CAAC;EAyaH,OAAA,UAAC;CAAA,EAAA;SA9cY,UAAU;AAudvB,SAAS,cAAc,CAAC,WAA+C,EAAA;;EACrE,OAAO,CAAA,EAAA,GAAA,WAAW,KAAA,IAAA,IAAX,WAAW,KAAA,KAAA,CAAA,GAAX,WAAW,GAAI,MAAM,CAAC,OAAO,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAI,OAAO;AACjD;AAEA,SAAS,UAAU,CAAI,KAAU,EAAA;EAC/B,OAAO,KAAK,IAAI,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,UAAU,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,UAAU,CAAC,KAAK,CAAC,QAAQ,CAAC;AACjG;AAEA,SAAS,YAAY,CAAI,KAAU,EAAA;EACjC,OAAQ,KAAK,IAAI,KAAK,YAAY,UAAU,IAAM,UAAU,CAAC,KAAK,CAAC,IAAI,cAAc,CAAC,KAAK,CAAE;AAC/F","sourceRoot":"","sourcesContent":["import { SafeSubscriber, Subscriber } from './Subscriber';\nimport { isSubscription } from './Subscription';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nimport { isFunction } from './util/isFunction';\nimport { errorContext } from './util/errorContext';\nvar Observable = (function () {\n    function Observable(subscribe) {\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var _this = this;\n        var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n        errorContext(function () {\n            var _a = _this, operator = _a.operator, source = _a.source;\n            subscriber.add(operator\n                ?\n                    operator.call(subscriber, source)\n                : source\n                    ?\n                        _this._subscribe(subscriber)\n                    :\n                        _this._trySubscribe(subscriber));\n        });\n        return subscriber;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            sink.error(err);\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscriber = new SafeSubscriber({\n                next: function (value) {\n                    try {\n                        next(value);\n                    }\n                    catch (err) {\n                        reject(err);\n                        subscriber.unsubscribe();\n                    }\n                },\n                error: reject,\n                complete: resolve,\n            });\n            _this.subscribe(subscriber);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var _a;\n        return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return (value = x); }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    var _a;\n    return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;\n}\nfunction isObserver(value) {\n    return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\nfunction isSubscriber(value) {\n    return (value && value instanceof Subscriber) || (isObserver(value) && isSubscription(value));\n}\n//# sourceMappingURL=Observable.js.map"]},"metadata":{},"sourceType":"module"}