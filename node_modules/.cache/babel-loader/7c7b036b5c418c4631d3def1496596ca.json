{"ast":null,"code":"import { Subject } from '../Subject';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { innerFrom } from '../observable/innerFrom';\nexport function windowWhen(closingSelector) {\n  return operate(function (source, subscriber) {\n    var window;\n    var closingSubscriber;\n    var handleError = function handleError(err) {\n      window.error(err);\n      subscriber.error(err);\n    };\n    var openWindow = function openWindow() {\n      closingSubscriber === null || closingSubscriber === void 0 ? void 0 : closingSubscriber.unsubscribe();\n      window === null || window === void 0 ? void 0 : window.complete();\n      window = new Subject();\n      subscriber.next(window.asObservable());\n      var closingNotifier;\n      try {\n        closingNotifier = innerFrom(closingSelector());\n      } catch (err) {\n        handleError(err);\n        return;\n      }\n      closingNotifier.subscribe(closingSubscriber = createOperatorSubscriber(subscriber, openWindow, openWindow, handleError));\n    };\n    openWindow();\n    source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n      return window.next(value);\n    }, function () {\n      window.complete();\n      subscriber.complete();\n    }, handleError, function () {\n      closingSubscriber === null || closingSubscriber === void 0 ? void 0 : closingSubscriber.unsubscribe();\n      window = null;\n    }));\n  });\n}","map":{"version":3,"sources":["../../../../src/internal/operators/windowWhen.ts"],"names":[],"mappings":"AAEA,SAAS,OAAO,QAAQ,YAAY;AAEpC,SAAS,OAAO,QAAQ,cAAc;AACtC,SAAS,wBAAwB,QAAQ,sBAAsB;AAC/D,SAAS,SAAS,QAAQ,yBAAyB;AA8CnD,OAAM,SAAU,UAAU,CAAI,eAA2C,EAAA;EACvE,OAAO,OAAO,CAAC,UAAC,MAAM,EAAE,UAAU,EAAA;IAChC,IAAI,MAAyB;IAC7B,IAAI,iBAA8C;IAMlD,IAAM,WAAW,GAAG,SAAd,WAAW,CAAI,GAAQ,EAAA;MAC3B,MAAO,CAAC,KAAK,CAAC,GAAG,CAAC;MAClB,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC;IACvB,CAAC;IAQD,IAAM,UAAU,GAAG,SAAb,UAAU,GAAG;MAGjB,iBAAiB,KAAA,IAAA,IAAjB,iBAAiB,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAjB,iBAAiB,CAAE,WAAW,EAAE;MAGhC,MAAM,KAAA,IAAA,IAAN,MAAM,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAN,MAAM,CAAE,QAAQ,EAAE;MAGlB,MAAM,GAAG,IAAI,OAAO,EAAK;MACzB,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC;MAGtC,IAAI,eAAgC;MACpC,IAAI;QACF,eAAe,GAAG,SAAS,CAAC,eAAe,EAAE,CAAC;OAC/C,CAAC,OAAO,GAAG,EAAE;QACZ,WAAW,CAAC,GAAG,CAAC;QAChB;MACD;MAMD,eAAe,CAAC,SAAS,CAAE,iBAAiB,GAAG,wBAAwB,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,WAAW,CAAC,CAAE;IAC5H,CAAC;IAGD,UAAU,EAAE;IAGZ,MAAM,CAAC,SAAS,CACd,wBAAwB,CACtB,UAAU,EACV,UAAC,KAAK,EAAA;MAAK,OAAA,MAAO,CAAC,IAAI,CAAC,KAAK,CAAC;IAAnB,CAAmB,EAC9B,YAAA;MAEE,MAAO,CAAC,QAAQ,EAAE;MAClB,UAAU,CAAC,QAAQ,EAAE;IACvB,CAAC,EACD,WAAW,EACX,YAAA;MAGE,iBAAiB,KAAA,IAAA,IAAjB,iBAAiB,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAjB,iBAAiB,CAAE,WAAW,EAAE;MAChC,MAAM,GAAG,IAAK;IAChB,CAAC,CACF,CACF;EACH,CAAC,CAAC;AACJ","sourceRoot":"","sourcesContent":["import { Subject } from '../Subject';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { innerFrom } from '../observable/innerFrom';\nexport function windowWhen(closingSelector) {\n    return operate(function (source, subscriber) {\n        var window;\n        var closingSubscriber;\n        var handleError = function (err) {\n            window.error(err);\n            subscriber.error(err);\n        };\n        var openWindow = function () {\n            closingSubscriber === null || closingSubscriber === void 0 ? void 0 : closingSubscriber.unsubscribe();\n            window === null || window === void 0 ? void 0 : window.complete();\n            window = new Subject();\n            subscriber.next(window.asObservable());\n            var closingNotifier;\n            try {\n                closingNotifier = innerFrom(closingSelector());\n            }\n            catch (err) {\n                handleError(err);\n                return;\n            }\n            closingNotifier.subscribe((closingSubscriber = createOperatorSubscriber(subscriber, openWindow, openWindow, handleError)));\n        };\n        openWindow();\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) { return window.next(value); }, function () {\n            window.complete();\n            subscriber.complete();\n        }, handleError, function () {\n            closingSubscriber === null || closingSubscriber === void 0 ? void 0 : closingSubscriber.unsubscribe();\n            window = null;\n        }));\n    });\n}\n//# sourceMappingURL=windowWhen.js.map"]},"metadata":{},"sourceType":"module"}