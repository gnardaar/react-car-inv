{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { AsyncAction } from './AsyncAction';\nimport { immediateProvider } from './immediateProvider';\nvar AsapAction = function (_super) {\n  __extends(AsapAction, _super);\n  function AsapAction(scheduler, work) {\n    var _this = _super.call(this, scheduler, work) || this;\n    _this.scheduler = scheduler;\n    _this.work = work;\n    return _this;\n  }\n  AsapAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n    if (delay === void 0) {\n      delay = 0;\n    }\n    if (delay !== null && delay > 0) {\n      return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);\n    }\n    scheduler.actions.push(this);\n    return scheduler._scheduled || (scheduler._scheduled = immediateProvider.setImmediate(scheduler.flush.bind(scheduler, undefined)));\n  };\n  AsapAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n    var _a;\n    if (delay === void 0) {\n      delay = 0;\n    }\n    if (delay != null ? delay > 0 : this.delay > 0) {\n      return _super.prototype.recycleAsyncId.call(this, scheduler, id, delay);\n    }\n    var actions = scheduler.actions;\n    if (id != null && ((_a = actions[actions.length - 1]) === null || _a === void 0 ? void 0 : _a.id) !== id) {\n      immediateProvider.clearImmediate(id);\n      scheduler._scheduled = undefined;\n    }\n    return undefined;\n  };\n  return AsapAction;\n}(AsyncAction);\nexport { AsapAction };","map":{"version":3,"sources":["../../../../src/internal/scheduler/AsapAction.ts"],"names":[],"mappings":";AAAA,SAAS,WAAW,QAAQ,eAAe;AAG3C,SAAS,iBAAiB,QAAQ,qBAAqB;AAGvD,IAAA,UAAA,GAAA,UAAA,MAAA,EAAA;EAAmC,SAAA,CAAA,UAAA,EAAA,MAAA,CAAA;EACjC,SAAA,UAAA,CAAsB,SAAwB,EAAY,IAAmD,EAAA;IAA7G,IAAA,KAAA,GACE,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,SAAS,EAAE,IAAI,CAAC,IAAA,IAAA;IADF,KAAA,CAAA,SAAS,GAAT,SAAS;IAA2B,KAAA,CAAA,IAAI,GAAJ,IAAI;;EAE9D;EAEU,UAAA,CAAA,SAAA,CAAA,cAAc,GAAxB,UAAyB,SAAwB,EAAE,EAAgB,EAAE,KAAiB,EAAA;IAAjB,IAAA,KAAA,KAAA,KAAA,CAAA,EAAA;MAAA,KAAA,GAAA,CAAiB;IAAA;IAEpF,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,GAAG,CAAC,EAAE;MAC/B,OAAO,MAAA,CAAA,SAAA,CAAM,cAAc,CAAA,IAAA,CAAA,IAAA,EAAC,SAAS,EAAE,EAAE,EAAE,KAAK,CAAC;IAClD;IAED,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC;IAI5B,OAAO,SAAS,CAAC,UAAU,KAAK,SAAS,CAAC,UAAU,GAAG,iBAAiB,CAAC,YAAY,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC;EACpI,CAAC;EAES,UAAA,CAAA,SAAA,CAAA,cAAc,GAAxB,UAAyB,SAAwB,EAAE,EAAgB,EAAE,KAAiB,EAAA;;IAAjB,IAAA,KAAA,KAAA,KAAA,CAAA,EAAA;MAAA,KAAA,GAAA,CAAiB;IAAA;IAIpF,IAAI,KAAK,IAAI,IAAI,GAAG,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE;MAC9C,OAAO,MAAA,CAAA,SAAA,CAAM,cAAc,CAAA,IAAA,CAAA,IAAA,EAAC,SAAS,EAAE,EAAE,EAAE,KAAK,CAAC;IAClD;IAIO,IAAA,OAAO,GAAK,SAAS,CAAA,OAAd;IACf,IAAI,EAAE,IAAI,IAAI,IAAI,CAAA,CAAA,EAAA,GAAA,OAAO,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAE,EAAE,MAAK,EAAE,EAAE;MACxD,iBAAiB,CAAC,cAAc,CAAC,EAAE,CAAC;MACpC,SAAS,CAAC,UAAU,GAAG,SAAS;IACjC;IAED,OAAO,SAAS;EAClB,CAAC;EACH,OAAA,UAAC;AAAD,CAAC,CApCkC,WAAW,CAAA","sourceRoot":"","sourcesContent":["import { __extends } from \"tslib\";\nimport { AsyncAction } from './AsyncAction';\nimport { immediateProvider } from './immediateProvider';\nvar AsapAction = (function (_super) {\n    __extends(AsapAction, _super);\n    function AsapAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        return _this;\n    }\n    AsapAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) { delay = 0; }\n        if (delay !== null && delay > 0) {\n            return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);\n        }\n        scheduler.actions.push(this);\n        return scheduler._scheduled || (scheduler._scheduled = immediateProvider.setImmediate(scheduler.flush.bind(scheduler, undefined)));\n    };\n    AsapAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        var _a;\n        if (delay === void 0) { delay = 0; }\n        if (delay != null ? delay > 0 : this.delay > 0) {\n            return _super.prototype.recycleAsyncId.call(this, scheduler, id, delay);\n        }\n        var actions = scheduler.actions;\n        if (id != null && ((_a = actions[actions.length - 1]) === null || _a === void 0 ? void 0 : _a.id) !== id) {\n            immediateProvider.clearImmediate(id);\n            scheduler._scheduled = undefined;\n        }\n        return undefined;\n    };\n    return AsapAction;\n}(AsyncAction));\nexport { AsapAction };\n//# sourceMappingURL=AsapAction.js.map"]},"metadata":{},"sourceType":"module"}